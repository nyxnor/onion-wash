.\" Automatically generated by Pandoc 2.9.2.1
.\"
.TH "vitor" "8" "2022-01-21" "vitor 0.0.1" "Tor System Manager's Manual"
.hy
.SH NAME
.PP
vitor - Is a visudo/vidoas but for tor configuration files written in
POSIX compliant shell.
.SH SYNOPSIS
.PP
\f[B]vitor\f[R] [\f[B]-h\f[R]] [\f[B]-u\f[R] \f[I]tor_user\f[R]]
[\f[B]-f\f[R] \f[I]tor_conf\f[R]]
.PD 0
.P
.PD
.SH DESCRIPTION
.PP
\f[B]vitor\f[R] creates a temporary copy of the file specified on
\f[I]tor_conf\f[R] and if file doesn\[aq]t exist, the editor will create
one.
Then, it is checked if vitor is already in use on that file by testing
if lock file exists, if it does, abort.
To get the editor value, it is checked for the environment variables to
open the editor with the \f[I]SUDO_EDITOR\f[R]/\f[I]DOAS_EDITOR\f[R], if
they are empty try \f[I]VISUAL\f[R], if it is also empty try
\f[I]EDITOR\f[R], if it is also empty fallback to a editor symlinked to
the \[dq]editor\[dq] command, then to a unix text editor first, the
Vi(1), else try Vim(1), NVim(1), Nano(1), Pico(1), Emacs(1), Mg(1).
If there is no available editor, fail.
After exiting the editor, the temporary copy is checked with \f[I]tor -f
temp_file --verify-config\f[R] and if it is invalid, warn the user about
the errors and press \f[I]e\f[R] to continue (loop opens the editor
again) or \f[I]x\f[R] exit which will delete the temporary file and the
lock file.
If the configuration if valid, save the temporary copy to its original
location.
.SH OPTIONS
.TP
\f[B]-h\f[R]
Display a short help message and exit.
.TP
\f[B]-f\f[R] \f[I]tor_conf\f[R]
Specify the configuration file to open.
If \f[I]tor_conf\f[R] is not set, default to /etc/tor/torrc.
.TP
\f[B]-u\f[R] \f[I]tor_user\f[R]
Specify the tor user to run the daemon as.
If \f[I]tor_user\f[R] is not set, the \f[I]tor_conf\f[R] must contain
the \[dq]User\[dq] option already.
.SH ENVIRONMENT
.TP
\f[B]SUDO_USER\f[R], \f[B]DOAS_USER\f[R]
Used to check where its not only running \f[I]vitor\f[R] as root but
also specifying the command to runuser tor.
.TP
\f[B]SUDO_EDITOR\f[R], \f[B]DOAS_EDITOR\f[R], \f[B]VISUAL\f[R], \f[B]EDITOR\f[R]
Use environment variables in the above order to define the editor, in
case any are empty, fallback to the next.
If every variable is empty, fallback to Vi(1).
.SH EXIT VALUE
.TP
\f[B]0\f[R]
Success.
.TP
\f[B]1\f[R]
Fail.
.SH EXAMPLES
.PP
Edit the default configuration file /etc/tor/torrc:
.IP
.nf
\f[C]
vitor
\f[R]
.fi
.PP
Edit a configuration file that does not have the \f[I]User\f[R] option
set (where \f[I]debian-tor\f[R] is the tor user of your system):
.IP
.nf
\f[C]
vitor -u debian-tor
\f[R]
.fi
.PP
Edit an alternative configuration file (note \f[I]-f\f[R] is not needed
if the file is the last positional argument):
.IP
.nf
\f[C]
vitor -u debian-tor /usr/local/etc/tor/torrc.d/50_user.conf
\f[R]
.fi
.SH SEE ALSO
.PP
tor(1)
.SH COPYRIGHT
.PP
Copyright \[co] 2021 OnionJuggler developers (MIT) Copyright \[co] 2022
Vitor developers (MIT) This is free software: you are free to change and
redistribute it.
There is NO WARRANTY, to the extent permitted by law.
.SH AUTHORS
Written by nyxnor (nyxnor\[at]protonmail.com).
